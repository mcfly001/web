<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="../js/default.js"></script>
    <style>
    .btn-stat-op {
        margin-left: -30%;
    }
    #dns_switch_d,
    #dns_switch_p {
        margin-top: 5px;
    }
    </style>
</head>

<body>
    <div class="wrapper">
        <div class="choose_area">
            <ol class="ol_tag clear">
                <li><a data-key="wan_setting" href="#" class="selected"></a></li>
            </ol>
        </div>
        <div class="line">
            <div class="clear"></div>
            <div class="le">
                <span data-key="protocol"></span>
            </div>
            <div class="mid">
                <select name="protocol" id="protocol" onchange="changeProt()">
                    <option data-key="dhcp" value="DHCP" selected="selected"></option>
                    <option data-key="static_address" value="STATIC"></option>
                    <option id="proto_pppoe" value="PPPOE">PPPOE</option>
                </select>
            </div>
            <div class="rig">
                <button data-key="apply" id="Tsave"></button>
            </div>
            <div class="clear"></div>
        </div>
        <div id="dhcp-cont">
            <!-- <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span>请求DHCP时发送的主机名：</span>
                </div>
                <div class="mid">
                    <input type="text" id="hostname" class="form-control"></input>
                </div>
                <div class="clear"></div>
            </div> -->
            <!-- <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span>设置MTU：</span>
                </div>
                <div class="mid">
                    <input type="text" id="mtu_d" placeholder="1500" class="form-control"></input>
                </div>
                <div class="clear"></div>
            </div> -->
            <!-- <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span>克隆MAC地址：</span>
                </div>
                <div class="mid">
                    <input type="text" id="macaddr_d" class="form-control"></input>
                </div>
                <div class="clear"></div>
            </div> -->
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="custom_dns"></span>
                </div>
                <div class="mid">
                    <input type="checkbox" id="dns_switch_d"></input>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line dns_d">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="primary_dns_server"></span>
                </div>
                <div class="mid">
                    <input type="text" id="dns_m_d" class="form-control"></input>
                </div>
                <div class="rig">
                    <span data-key="optional" class="hints"></span>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line dns_d">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="secondary_dns_server"></span>
                </div>
                <div class="mid">
                    <input type="text" id="dns_a_d" class="form-control"></input>
                </div>
                <div class="rig">
                    <span data-key="optional" class="hints"></span>
                </div>
                <div class="clear"></div>
            </div>
            <div class="choose_area">
                <ol class="ol_tag clear">
                    <li><a data-key="wan_status" href="#" class="selected"></a></li>
                </ol>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="connect_type"></span>
                </div>
                <div class="mid">
                    <span class="mid-span" id="con_d">DHCP</span>
                </div>
                <!-- <div class="rig">
                    <button class="btn-stat-op">释放</button>
                </div> -->
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="link_status"></span>
                </div>
                <div class="mid">
                    <span class="mid-span" id="linksta_d"></span>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="ip_address"></span>
                </div>
                <div class="mid">
                    <span class="mid-span" id="ipsta_d"></span>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="gateway_address"></span>
                </div>
                <div class="mid">
                    <span class="mid-span" id="gatewaysta_d"></span>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="primary_dns_server"></span>
                </div>
                <div class="mid">
                    <span class="mid-span" id="dnssta_m_d"></span>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="secondary_dns_server"></span>
                </div>
                <div class="mid">
                    <span class="mid-span" id="dnssta_a_d"></span>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="mac_addr"></span>
                </div>
                <div class="mid">
                    <span class="mid-span" id="macsta_d"></span>
                </div>
                <div class="clear"></div>
            </div>
        </div>
        <div id="pppoe-cont" style="display: none;">
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="pap_chap_name"></span>
                </div>
                <div class="mid">
                    <input type="text" id="username_p" class="form-control"></input>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="pap_chap_password"></span>
                </div>
                <div class="mid">
                    <input type="password" id="password_p" class="form-control"></input>
                </div>
                <div class="clear"></div>
            </div>
            <!-- <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span>设置MTU：</span>
                </div>
                <div class="mid">
                    <input type="text" id="mtu_p" placeholder="1500" class="form-control"></input>
                </div>
                <div class="clear"></div>
            </div> -->
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="custom_dns"></span>
                </div>
                <div class="mid">
                    <input type="checkbox" id="dns_switch_p"></input>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line dns_p">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="primary_dns_server"></span>
                </div>
                <div class="mid">
                    <input type="text" id="dns_m_p" class="form-control"></input>
                </div>
                <div class="rig">
                    <span data-key="optional" class="hints"></span>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line dns_p">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="secondary_dns_server"></span>
                </div>
                <div class="mid">
                    <input type="text" id="dns_a_p" class="form-control"></input>
                </div>
                <div class="rig">
                    <span data-key="optional" class="hints">（可选）</span>
                </div>
                <div class="clear"></div>
            </div>
            <div class="choose_area">
                <ol class="ol_tag clear">
                    <li><a data-key="wan_status" href="#" class="selected">WAN口状态</a></li>
                </ol>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="connect_type">连接方式：</span>
                </div>
                <div class="mid">
                    <span class="mid-span" id="con_p">PPPOE</span>
                </div>
                <!-- <div class="rig">
                    <button class="btn-stat-op">释放</button>
                </div> -->
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="link_status">链路状态：</span>
                </div>
                <div class="mid">
                    <span class="mid-span" id="linksta_p"></span>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="ip_address">IP地址：</span>
                </div>
                <div class="mid">
                    <span class="mid-span" id="ip_p"></span>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="subnet_mask">子网掩码：</span>
                </div>
                <div class="mid">
                    <span class="mid-span" id="mask_p"></span>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="gateway_address">网关地址：</span>
                </div>
                <div class="mid">
                    <span class="mid-span" id="gate_p"></span>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="primary_dns_server">主DNS服务器：</span>
                </div>
                <div class="mid">
                    <span class="mid-span" id="dnssta_m_p"></span>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="secondary_dns_server">辅DNS服务器：</span>
                </div>
                <div class="mid">
                    <span class="mid-span" id="dnssta_a_p"></span>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="mac_addr">MAC地址：</span>
                </div>
                <div class="mid">
                    <span class="mid-span" id="macsta_p"></span>
                </div>
                <div class="clear"></div>
            </div>
        </div>
        <div id="static-cont" style="display: none;">
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="ipv4_address">IPv4地址：</span>
                </div>
                <div class="mid">
                    <input type="text" id="ip_sta_s" class="form-control"></input>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="subnet_mask_ipv4">IPv4子网掩码：</span>
                </div>
                <div class="mid">
                    <select name="static-mask" id="static-mask" onchange="mask()">
                        <option value="255.255.255.0">255.255.255.0</option>
                        <option value="255.255.255.255">255.255.255.255</option>
                        <option value="255.255.0.0">255.255.0.0</option>
                        <option value="255.0.0.0">255.0.0.0</option>
                        <option data-key="customize" value="custom">自定义</option>
                    </select>
                    <input type="text" class="form-control" id="othermask" placeholder="自定义子网掩码" style="display: none;"></input>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="ipv4_gateway">IPv4网关：</span>
                </div>
                <div class="mid">
                    <input type="text" id="gateway_sta_s" class="form-control"></input>
                </div>
                <div class="clear"></div>
            </div>
            <!-- <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span>设置MTU：</span>
                </div>
                <div class="mid">
                    <input type="text" id="mtu_sta_s" placeholder="1500" class="form-control"></input>
                </div>
                <div class="clear"></div>
            </div> -->
            <!-- <div class="line">
                <div class="le">
                    <span>克隆MAC地址：</span>
                </div>
                <div class="mid">
                    <input type="text" id="mac_sta_s" class="form-control"></input>
                </div>
            </div> -->
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="primary_dns_server">主DNS服务器：</span>
                </div>
                <div class="mid">
                    <input type="text" id="dns_m_sta_s" class="form-control"></input>
                </div>
                <div class="rig">
                    <button data-key="recommend" onclick="recommend_dns()">推荐</button>
                </div>
                <div class="clear"></div>
            </div>
            <div class="line">
                <div class="clear"></div>
                <div class="le">
                    <span data-key="secondary_dns_server">辅DNS服务器：</span>
                </div>
                <div class="mid">
                    <input type="text" id="dns_a_sta_s" class="form-control"></input>
                </div>
                <div class="rig">
                    <span class="hints"></span>
                </div>
                <div class="clear"></div>
            </div>
        </div>
    </div>
</body>
<script>
$('#othermask').attr('placeholder', allResources["custom_subnet_mask"][g_lang]);

var net = sessionStorage.getItem("netbridge");
if (net == 2) {
     document.getElementById("proto_pppoe").style.display = "none";
 }
hideDiv([".dns_p", ".dns_d"]);

function show_dns() {
    if ($("#dns_switch_p").prop("checked") == true) {
        $(".dns_p").css("display", "block");
    } else {
        $(".dns_p").css("display", "none");
    }
    if ($("#dns_switch_d").prop("checked") == true) {
        $(".dns_d").css("display", "block");
    } else {
        $(".dns_d").css("display", "none");
    }
}
$("#dns_switch_p").click(show_dns);
$("#dns_switch_d").click(show_dns);

function recommend_dns() {
    document.getElementById("dns_m_sta_s").value = "223.5.5.5";
    document.getElementById("dns_a_sta_s").value = "223.6.6.6";
}

function changeProt() {
    var objs = document.getElementById("protocol");
    var value = objs.options[objs.selectedIndex].value;
    switch (value) {
        case "DHCP":
            document.getElementById("dhcp-cont").style.display = 'block';
            document.getElementById("static-cont").style.display = 'none';
            document.getElementById("pppoe-cont").style.display = 'none';
            break;
        case "STATIC":
            document.getElementById("static-cont").style.display = 'block';
            document.getElementById("dhcp-cont").style.display = 'none';
            document.getElementById("pppoe-cont").style.display = 'none';
            break;
        case "PPPOE":
            document.getElementById("pppoe-cont").style.display = 'block';
            document.getElementById("dhcp-cont").style.display = 'none';
            document.getElementById("static-cont").style.display = 'none';
            break;
    }
};

function mask() {
    var objs = document.getElementById("static-mask");
    var value = objs.options[objs.selectedIndex].value;
    if (value == "custom") {
        document.getElementById("othermask").style.display = "block";
    } else {
        document.getElementById("othermask").style.display = "none";
    }
};

function numToMask(num){
    var mask_arr = [],
        m = 0,
        re;
    for(var i = 0; i < 4; i++){
        mask_arr[i] = ""; 
        for(var k = 0; k < 8; k++){
            if(m < num){
                mask_arr[i] += "1"
            }else {
                mask_arr[i] += "0"
            }
            m++;
        }
    }
    for(var j = 0; j < 4; j++){
        mask_arr[j] = parseInt(mask_arr[j], 2);
    }
    re = mask_arr.join(".");
    return re
}
//刷新
(function() {
    $.ajax({
        url: url_host + 'wan_interface&action=read' + url_time,
        type: "GET",
        contentType: "application/json",
        dataType: 'json',
        success: function(data) {
            var obj = data.result;
            if (obj.code == 0) {
                var sta = obj.status;
                switch (obj.proto) {
                    case "dhcp":
                        var dnss = (obj.dns == undefined ? "" : obj.dns.split(" "));

                        $("#protocol").val("DHCP");
                        document.getElementById("dns_switch_d").checked = (obj.peerdns == 0 ? true : false)
                        show_dns();
                        document.getElementById("dns_m_d").value = (dnss[0] == undefined ? "" : dnss[0]);
                        document.getElementById("dns_a_d").value = (dnss[1] == undefined ? "" : dnss[1]);

                        showDiv(["#dhcp-cont"]);
                        hideDiv(["#pppoe-cont", "#static-cont"]);
                        $("#con_d").text(obj.proto);
                        if (sta.available === true) {
                            $("#linksta_d").text(allResources['connected'][g_lang]);
                        } else {
                            $("#linksta_d").text(allResources['disconnected'][g_lang]);
                        };
                        var ip = "",
                            gateway_add = "";
                        if (sta["ipv4-address"] != undefined) {
                            for (var i = 0; i < sta["ipv4-address"].length; i++) {
                                ip = ip + " " + sta["ipv4-address"][i].address;
                            }
                        }
                        
                        $("#ipsta_d").text(ip);
                        if (sta.route != undefined) {
                            for (var i = 0; i < sta.route.length; i++) {
                                 //gateway_add = gateway_add + sta.route[i].nexthop + " ";
                                 if (sta.route[i].target == "0.0.0.0") {
                                     gateway_add = sta.route[i].nexthop;
                                 }
                             } 
                         }
                        
                        $("#gatewaysta_d").text(gateway_add);
                        if (sta["dns-server"] != undefined) {
                            $("#dnssta_m_d").text(sta["dns-server"][0] == undefined ? "" : sta["dns-server"][0]);
                            $("#dnssta_a_d").text(sta["dns-server"][1] == undefined ? "" : sta["dns-server"][1]);
                        }
                        $("#macsta_d").text(obj.macaddr_status);
                        if (obj.macaddr) {
                            $("#macaddr_d").val(obj.macaddr);
                        } else {
                            $("#macaddr_d").val(obj.macaddr_status);
                        }
                        break;
                    case 'pppoe':
                        var dnss = (obj.dns == undefined ? "" : obj.dns.split(" "));

                        $("#protocol").val("PPPOE");

                        document.getElementById("dns_switch_p").checked = (obj.peerdns == 0 ? true : false)
                        show_dns();
                        document.getElementById("dns_m_p").value = (dnss[0] == undefined ? "" : dnss[0]);
                        document.getElementById("dns_a_p").value = (dnss[1] == undefined ? "" : dnss[1]);

                        showDiv(["#pppoe-cont"]);
                        hideDiv(["#static-cont", "#dhcp-cont"]);
                        $("#con_p").text(obj.proto);
                        if (sta.available === true) {
                            $("#linksta_p").text(allResources['connected'][g_lang]);
                        } else {
                            $("#linksta_p").text(allResources['disconnected'][g_lang]);
                        };
                        var ip = "",
                            gateway_add = "",
                            mask_p = "";
                        if (sta["ipv4-address"] != undefined) {
                            for (var i = 0; i < sta["ipv4-address"].length; i++) {
                                ip = ip + " " + sta["ipv4-address"][i].address;
                                mask_p = mask_p + " " + numToMask(sta["ipv4-address"][i].mask);
                            }
                        }
                        $("#mask_p").text(mask_p);
                        $("#ip_p").text(ip);
                        if (sta.route != undefined) {
                            for (var i = 0; i < sta.route.length; i++) {
                                gateway_add = gateway_add + sta.route[i].nexthop + " ";
                            }
                        }
                        
                        $("#gate_p").text(gateway_add);
                        if (sta["dns-server"] != undefined) {
                            $("#dnssta_m_p").text(sta["dns-server"][0] == undefined ? "" : sta["dns-server"][0]);
                            $("#dnssta_a_p").text(sta["dns-server"][1] == undefined ? "" : sta["dns-server"][1]);
                        }
                        
                        
                        $("#macsta_p").text(obj.macaddr_status);
                        if (obj.macaddr) {
                            $("#macsta_p").val(obj.macaddr);
                        } else {
                            $("#macsta_p").val(obj.macaddr_status);
                        };
                        $("#mtu_p").val(obj.mtu);
                        $("#username_p").val(obj.username);
                        $("#password_p").val(obj.password);
                        break;
                    case 'static':
                        $("#protocol").val("STATIC");
                        showDiv(["#static-cont"]);
                        hideDiv(["#pppoe-cont", "#dhcp-cont"]);
                        $("#ip_sta_s").val(obj.ipaddr);
                        $("#gateway_sta_s").val(obj.gateway);
                        $("#mtu_sta_s").val(obj.mtu);
                        if (sta["dns-server"] != undefined) {
                            $("#dns_m_sta_s").val(sta["dns-server"][0] == undefined ? "" : sta["dns-server"][0]);
                            $("#dns_a_sta_s").val(sta["dns-server"][1] == undefined ? "" : sta["dns-server"][1]);
                        }
                        
                        $("#macsta_d").val(obj.macaddr_status);
                        if (obj.macaddr) {
                            $("#mac_sta_s").val(obj.macaddr);
                        } else {
                            $("#mac_sta_s").val(obj.macaddr_status);
                        }
                        if (obj.netmask != undefined) {
                            switch (obj.netmask) {
                                case "255.255.255.255":
                                    $("#static-mask").val(obj.netmask)
                                    break;
                                case "255.255.255.0":
                                    $("#static-mask").val(obj.netmask)
                                    break;
                                case "255.255.0.0":
                                    $("#static-mask").val(obj.netmask)
                                    break;
                                case "255.0.0.0":
                                    $("#static-mask").val(obj.netmask)
                                    break;
                                default:
                                    $("#static-mask").val("custom")
                                    $("#othermask").css("display", "")
                                    $("#othermask").val(obj.netmask)
                                    break;
                            }
                        }
                        break;
                }
            }
        }
    });

})();


$("#Tsave").click(function() {
    var proto, url_para, url;
    switch ($("#protocol").val()) {
        case "DHCP":
            proto = "dhcp";
            var hostname = $("#hostname").val() == undefined ? "" : $("#hostname").val(),
                mtu = ($("#mtu_d").val() == "" || $("#mtu_d").val() == undefined) ? 1500 : $("#mtu_d").val(),
                macaddr = $("#macaddr_d").val() == undefined ? "" : $("#macaddr_d").val(),
                dns1 = $("#dns_m_d").val(),
                dns2 = $("#dns_a_d").val(),
                peerdns,
                dns = dns1 + " " + dns2;

            if ($("#dns_switch_d").prop("checked")) {
                peerdns = 0;
            } else {
                peerdns = 1;
                dns = "";
            };
            //数据校验
            if (mtu != "" && (!IsNum(mtu) || mtu < 500 || mtu > 1500)) {
                lang_alert('mtu_setting_info');
                return false;
            }
            if (dns1 != "" && !IsIp(dns1)) {
                lang_alert('primary_dns_novalid');
                return false;
            }
            if (dns2 != "" && !IsIp(dns2)) {
                lang_lang_alert('secondary_dns_novalid');
                return false;
            }

            url = url_host + 'wan_interface&action=modify&proto=' + proto + '&hostname=' + hostname + '&mtu=' + mtu + '&macaddr' + macaddr + '&peerdns=' + peerdns + '&dns=' + dns + url_time;
            break;
        case "PPPOE":
            proto = "pppoe";
            var username = $("#username_p").val(),
                password = $("#password_p").val(),
                mtu = ($("#mtu_p").val() == "" || $("#mtu_p").val() == undefined) ? 1500 : $("#mtu_p").val(),
                dns1 = $("#dns_m_p").val(),
                dns2 = $("#dns_a_p").val(),
                peerdns,
                dns = dns1 + " " + dns2;
            if ($("#dns_switch_p").prop("checked")) {
                peerdns = 0;
            } else {
                peerdns = 1;
            };
            //数据校验
            if (username == "" || password == "") {
                lang_lang_alert('user_name_pass_empty');
                return false;
            }
            if (mtu != "" && (!IsNum(mtu) || mtu < 500 || mtu > 1500)) {
                lang_lang_alert('mtu_setting_info');
                return false;
            }

            if (dns1 != "" && !IsIp(dns1)) {
                lang_alert('primary_dns_novalid');
                return false;
            }
            if (dns2 != "" && !IsIp(dns2)) {
                lang_alert('secondary_dns_novalid');
                return false;
            }

            url = url_host + 'wan_interface&action=modify&proto=' + proto + '&username=' + username + '&password=' + password + '&mtu=' + mtu + '&peerdns=' + peerdns + '&dns=' + dns + url_time;
            break;
        case "STATIC":
            proto = "static";
            var ipaddr = $("#ip_sta_s").val(),
                netmask = ($("#static-mask").val() == "custom") ? $("#othermask").val() : $("#static-mask").val(),
                gateway = $("#gateway_sta_s").val(),
                mtu = ($("#mtu_sta_s").val() === "" || $("#mtu_sta_s").val() == undefined) ? 1500 : $("#mtu_sta_s").val(),
                macaddr = $("#mac_sta_s").val() == undefined ? "" : $("#mac_sta_s").val(),
                dns1 = $("#dns_m_sta_s").val(),
                dns2 = $("#dns_a_sta_s").val(),
                dns = dns1 + " " + dns2;
            //数据校验
            if (ipaddr == "") {
                lang_alert('ipv4_empty');
                return false;
            }
            if (netmask == "") {
                lang_alert('subnet_empty');
                return false;
            }
            if (!IsIp(ipaddr)) {
                lang_alert('ipv4_novalid');
                return false;
            }
            var othermask = $("#othermask").val();
            if (othermask != "" && !IsMask(othermask)) {
                lang_alert('custom_subnet_mask_novalid');
                return false;
            }
            if (gateway != "" && !IsIp(gateway)) {
                lang_alert('gateway_address_novalid');
                return false;
            }
            if (mtu != "" && (!IsNum(mtu) || mtu < 500 || mtu > 1500)) {
                lang_alert('mtu_setting_info');
                return false;
            }
            if (dns1 != "" && !IsIp(dns1)) {
                lang_alert('primary_dns_novalid');
                return false;
            }
            if (dns2 != "" && !IsIp(dns2)) {
                lang_alert('secondary_dns_novalid');
                return false;
            }

            url = url_host + 'wan_interface&action=modify&proto=' + proto + '&ipaddr=' + ipaddr + '&netmask=' + netmask + '&gateway=' + gateway + '&mtu=' + mtu + '&macaddr=' + macaddr + '&dns=' + dns + url_time;
            break;
    }
    check_code0(url);

})
</script>

</html>
